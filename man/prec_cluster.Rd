% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/prec_cluster.R
\name{prec_cluster}
\alias{prec_cluster}
\alias{prec_cluster.default}
\alias{prec_cluster.svyplan_cluster}
\title{Sampling Precision for a Multistage Cluster Allocation}
\usage{
prec_cluster(n, ...)

\method{prec_cluster}{default}(n, delta, rel_var = 1, k = 1, resp_rate = 1, ...)

\method{prec_cluster}{svyplan_cluster}(n, ...)
}
\arguments{
\item{n}{For the default method: numeric vector of per-stage sample
sizes (\code{c(n1, n2)} for 2-stage or \code{c(n1, n2, n3)} for 3-stage).
For \code{svyplan_cluster} objects: a cluster allocation from \code{\link[=n_cluster]{n_cluster()}}.}

\item{...}{Additional arguments passed to methods.}

\item{delta}{Numeric vector of homogeneity measures (length = stages - 1),
or a \code{svyplan_varcomp} object.}

\item{rel_var}{Unit relvariance (default 1).}

\item{k}{Ratio parameter(s). Scalar for 2-stage, length-2 vector for
3-stage (default 1).}

\item{resp_rate}{Expected response rate, in (0, 1]. Default 1 (no
adjustment). The effective stage-1 size is deflated by \code{resp_rate}.}
}
\value{
A \code{svyplan_prec} object with components \verb{$se}, \verb{$moe}, and \verb{$cv}.
}
\description{
Compute the sampling error (SE, MOE, CV) for a given multistage sample
allocation. This is the inverse of \code{\link[=n_cluster]{n_cluster()}}.
}
\details{
Stage count is determined by \code{length(n)}.

\strong{2-stage} (Valliant et al., 2018, Eq. 9.2.23):
\deqn{CV = \sqrt{\frac{V \cdot k}{n_1 \cdot n_2} (1 + \delta (n_2 - 1))}}

\strong{3-stage}:
\deqn{CV = \sqrt{\frac{V}{n_1 \cdot n_2 \cdot n_3} (k_1 \delta_1 n_2 n_3
  + k_2 (1 + \delta_2 (n_3 - 1)))}}
}
\examples{
prec_cluster(n = c(50, 12), delta = 0.05)
prec_cluster(n = c(50, 12, 8), delta = c(0.01, 0.05))

}
\references{
Valliant, R., Dever, J. A., and Kreuter, F. (2018).
\emph{Practical Tools for Designing and Weighting Survey Samples}
(2nd ed.). Springer. Ch. 9.
}
\seealso{
\code{\link[=n_cluster]{n_cluster()}} for the inverse operation, \code{\link[=varcomp]{varcomp()}} for
estimating variance components.
}
