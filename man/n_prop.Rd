% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/n_prop.R
\name{n_prop}
\alias{n_prop}
\alias{n_prop.default}
\alias{n_prop.svyplan_prec}
\title{Sample Size for a Proportion}
\usage{
n_prop(p, ...)

\method{n_prop}{default}(
  p,
  moe = NULL,
  cv = NULL,
  alpha = 0.05,
  N = Inf,
  deff = 1,
  resp_rate = 1,
  method = "wald",
  ...
)

\method{n_prop}{svyplan_prec}(p, moe = NULL, cv = NULL, ...)
}
\arguments{
\item{p}{For the default method: expected proportion, in (0, 1).
For \code{svyplan_prec} objects: a precision result from \code{\link[=prec_prop]{prec_prop()}}.}

\item{...}{Additional arguments passed to methods.}

\item{moe}{Desired margin of error. Specify exactly one of \code{moe} or \code{cv}.}

\item{cv}{Target coefficient of variation. Specify exactly one of \code{moe}
or \code{cv}.}

\item{alpha}{Significance level, default 0.05.}

\item{N}{Population size. \code{Inf} (default) means no finite population
correction.}

\item{deff}{Design effect multiplier (> 0). Values < 1 are valid for
efficient designs (e.g., stratified sampling with Neyman allocation).}

\item{resp_rate}{Expected response rate, in (0, 1]. Default 1 (no
adjustment). The sample size is inflated by \code{1 / resp_rate}.}

\item{method}{One of \code{"wald"} (default), \code{"wilson"}, or \code{"logodds"}.}
}
\value{
A \code{svyplan_n} object.
}
\description{
Compute the required sample size for estimating a population proportion
with a specified margin of error or coefficient of variation.
}
\details{
Three confidence interval methods are available:
\itemize{
\item \strong{Wald} (\code{"wald"}): Standard normal approximation
(Cochran, 1977, Ch. 3). Supports both \code{moe} and \code{cv} modes,
with optional finite population correction.
\item \strong{Wilson} (\code{"wilson"}): Wilson (1927) score interval. Only \code{moe}
mode, no FPC.
\item \strong{Log-odds} (\code{"logodds"}): Log-odds (logit) transform interval.
Only \code{moe} mode, with optional FPC.
}

For proportions near 0 or 1 (below 0.1 or above 0.9), the Wald interval
has poor coverage; \code{method = "wilson"} is recommended in those cases.

For the Wilson and log-odds methods, the design effect is applied as a
multiplicative factor to the final SRS sample size, which is an
approximation.

The Wald FPC uses the Cochran (1977, Ch. 3) form with an \code{N/(N-1)} factor
to account for the Bernoulli finite-population variance.

All methods use the normal (z) quantile. This is standard for survey
sampling where the sample size is large enough for the CLT to apply.
}
\examples{
# Wald, absolute margin of error
n_prop(p = 0.3, moe = 0.05)

# Wald, target CV with finite population
n_prop(p = 0.5, cv = 0.10, N = 10000)

# Wilson score interval
n_prop(p = 0.1, moe = 0.03, method = "wilson")

# With design effect and response rate
n_prop(p = 0.3, moe = 0.05, deff = 1.5, resp_rate = 0.8)

}
\references{
Cochran, W. G. (1977). \emph{Sampling Techniques} (3rd ed.). Wiley.

Wilson, E. B. (1927). Probable inference, the law of succession,
and statistical inference. \emph{Journal of the American Statistical
Association}, 22(158), 209--212.
}
\seealso{
\code{\link[=n_mean]{n_mean()}} for continuous variables, \code{\link[=n_cluster]{n_cluster()}} for
multistage designs, \code{\link[=n_multi]{n_multi()}} for multiple indicators,
\code{\link[=prec_prop]{prec_prop()}} for the inverse.
}
